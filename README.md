## Фильмотека API

Проект представляет собой бэкенд приложения "Фильмотека", который предоставляет REST API для управления базой данных фильмов. Это тестовое задание для отбора на стажировку в VK по направлению Go-разработка.

### Функционал API

API предоставляет весь функционал, требуемый в техническом задании:

- Добавление, изменение (частичное и полное), получение и удаление информации об актёрах и фильмах
- Получение списка фильмов с возможностью сортировки по различным параметрам
- Поиск фильма по фрагменту названия или имени актёра
- Получение списка актеров, участвующих в фильме
- Получение списка фильмов, в которых участвовал актер
- Регистрация аккаунта пользователя и авторизация по Basic Auth

API также покрыто unit тестами более чем на 90%. 

### Авторизация и Роли пользователей

API защищено авторизацией. По умолчанию новому пользователю присваивается роль `user`. Роль `admin` задается вручную через СУБД.

Роли пользователей:

- Обычный пользователь (user): имеет доступ только на получение данных и поиск
  
  Учетные данные для тестирования:
    ```
    username: user,
    password: password123
    ```

- Администратор (admin): имеет доступ ко всем действиям

  Учетные данные для тестирования:
    ```
    username: admin,
    password: password123
    ```

### Спецификация 

API предоставляет спецификацию в формате Swagger 2.0. Для ознакомления со спецификацией нужно запустить окружение и добавить `/swagger/index.html#/` к адресу в браузере.

Если вы используете адрес и порт по умолчанию, то спецификация будет доступна по адресу:

```
http://localhost:4000/swagger/index.html
```

### Unit тесты

Проект покрыт unit тестами более чем на 90%. Тесты проверяют весь функционал API, включая CRUD операции, сортировку, поиск и авторизацию.

### Конфигурация проекта

Конфигурация проекта осуществляется через `.env` файл, который содержит переменные окружения для настройки подключения к базе данных, порта приложения и других параметров. Пример `.env` файла представлен в репозитории.

### Инициализация базы данных

Схемы таблиц для PostgreSQL базы данных представлены в папке sql. В ней содержатся SQL скрипты для создания таблиц и вставки начальных данных для инициализации базы данных.

### Запуск

Чтобы запустить приложение, выполните следующие шаги:

1. Склонируйте репозиторий с GitHub

    ```
    git clone https://github.com/NikitaShlyakhtin/filmoteka
    ```

2. Перейдите в каталог проекта

    ```
    cd filmoteka
    ```

3. Соберите Docker образ и запустите окружение с помощью docker-compose:

    ```
    docker-compose up --build 
    ```

Приложение будет доступно по адресу, указанному в настройках Docker (по умолчанию - `http://localhost:4000`)
